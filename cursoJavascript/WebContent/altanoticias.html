<!DOCTYPE html>
<html>
<head>
		<meta charset="UTF-8">
		<link rel="icon" href="images/indra.ico" type="image/x-icon"/>
		<meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, maximum-scale=1" >
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="css/estilos.css" type="text/css">
		<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
		<title>Red Social Indra</title>
	
</head>
<body onload="loadGroups()">
	<div class="container-fluid">	
		<header class="row py-2" style="background-color: #00b0ca;">
				<nav class="navbar navbar-expand-lg col-lg-12 navbar-light">
				 <a href="#"><img src="https://login.indraweb.net/logon/themes/Default/custom_media/logo.png"></a>
				  <button class="navbar-toggler float-right" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false" aria-label="Toggle navigation">
				    <span class="navbar-toggler-icon"></span>
				  </button>
				 <div class="collapse navbar-collapse justify-content-end" id="navbarTogglerDemo02">
				    <ul class="navbar-nav mt-2 mt-lg-0  text-right ">
				      <li class="nav-item active">
				        <a class="nav-link text-white font-weight-bold" href="#">Home <span class="sr-only">(current)</span></a>
				      </li>
				      <li class="nav-item">
				        <a class="nav-link text-white font-weight-bold" href="#">Calendario</a>
				      </li>
				      <li class="nav-item">
				        <a class="nav-link  text-white font-weight-bold" href="#">Noticias</a>
				      </li>
				      <li class="nav-item">
				        <a class="nav-link  text-white font-weight-bold " href="#">Login</a>
				      </li>
				    </ul>				    
				 </div>
			</nav>
		</header>
		<div aria-label="breadcrumb" class="mt-2">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a href="javascript:history.back()">Indra</a></li>
				<li class="breadcrumb-item active" aria-current="page">Noticias</li>
				<li class="breadcrumb-item active" aria-current="page">Publicar noticia</li>
			</ol>
		</div>


		<form enctype='application/json' id="form_noticia">
			<div class="form-group">
  				<label for="text-input" class="col-form-label">Titulo de la noticia</label> 				 
   				 <input class="form-control" type="text" value="Titulo" id="example-text-input">  				
			</div>	
			<div class="form-group">
    		<label for="exampleTextarea"  class="col-form-label">Introduce tu noticia</label>
				<textarea class="form-control" id="exampleTextarea" rows="6"></textarea>
			</div>
    		<button class="btn btn-primary" type="submit" data-toggle="collapse" data-target="#collapse4" aria-expanded="false" aria-controls="collapse4" style="margin-top: 5px;">
			Publicar noticia
			</button>
			<template id="t1">
				<div class="form-check">
					<input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
					<label class="form-check-label" for="defaultCheck1"></label>
				</div>
			</template>
			<div id="grupos" class="mt-4"><p>Grupos</p></div>
		</form>
		<script type="text/javascript">
			var loadGroups = () => {
				var groups = new Array("grupo test A", "group an", "grupo test B","grupo test C","grupo test D");
				var cols = groups.length;
				var templateT1 = document.querySelector("#t1").content;            	
				var div = templateT1.querySelector(".form-check");
				var input = templateT1.querySelector("input");
				var label = templateT1.querySelector("label");
				div.remove();
				
            	groups.forEach((group, index) => {
					var newDiv = div.cloneNode(false);	
					var newInput = input.cloneNode(false);
					var newLabel = label.cloneNode(true);
					newLabel.textContent = group;				
					newInput.setAttribute("value", index);				
					newDiv.appendChild(newInput);
					newDiv.appendChild(newLabel);				
					templateT1.appendChild(newDiv);                									
				
            	});
				var clonT1 = templateT1.cloneNode(true);
            	document.querySelector("#grupos").appendChild(clonT1);
			}
			class Publicacion{
					constructor(titulo, contenido, grupos, id = 0){
							this.titulo = titulo;
							this.id = id;
							this.contenido = contenido;
							this.grupos = grupos;
							this.url = document.URL+titulo;													
					}					
			}
			
			document.querySelector("#form_noticia").addEventListener("submit", function(event){		
							var obj = null;
							
							var breakEmpty = {
								 message : "Tiene que rellenar todos los campos"
							}
							this.querySelectorAll("input, textarea, select").forEach(element => {								
								try{
									if(element.value == "" || element.value == undefined) throw breakEmpty																														
									if(element.type == "text")	
										titulo = element.value;								
									if(element.type == "textarea")
										contenido = element.value;									
									if(element.type == "select-one")
										grupos = element.value;									
								}catch(e){
									  alert(e.message);
								}
									
							});					 
							
							obj = new Publicacion(titulo, contenido, tema, 24);
							alert(JSON.stringify(obj)); 
							event.preventDefault();
				
			});
		</script>
</div>
		 <footer class="row justify-content-between bg-dark m-0 py-5 mt-5">
				<div class="col-lg-5 align-self-center">
					<ul style="list-style: none;" class="text-white p-0 pt-3 text-center">
						<li>Contacto</li>
						<li>Blog</li>
						<li>Mapa del sitio</li>
					</ul>
				</div>
				<div class="col-lg-5 align-self-center">
					<ul class="text-center p-0">
						<li class="fa fa-facebook"></li>
						<li class="fa fa-twitter"></li>
						<li class="fa fa-instagram"></li>
						<li class="fa fa-linkedin"></li>
					</ul>
				</div>
			</footer>


</body>
</html>